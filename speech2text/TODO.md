# Voice Input 项目改进计划
# 创建时间: 2025-12-27

================================================================================
🔴 高优先级
================================================================================

[ ] 移除硬编码设备索引
    - 位置: main.py:59
    - 问题: device_index = 11 硬编码
    - 建议: 从命令行参数或配置文件获取

[ ] 添加依赖管理文件
    - 添加 pyproject.toml 或 requirements.txt
    - 记录依赖: pyaudio, numpy, openai, psutil, python-dotenv

[ ] OpenAI API 调用添加重试机制
    - 位置: transcriber.py
    - 建议: 使用 tenacity 库或手动实现指数退避重试

[ ] 静音监测不是很准确，且不即时。使用快捷键来终止录音

================================================================================
🟡 中等优先级
================================================================================

[ ] 添加日志记录系统
    - 使用 logging 模块替代无输出
    - 方便调试和问题排查

[ ] 优化异常处理
    - 位置: recorder.py:110
    - 问题: except Exception 太泛
    - 建议: 指定具体异常类型如 IOError, OSError

[ ] 完善类型注解
    - 位置: notifier.py, temp_manager.py
    - 添加函数返回类型注解

[ ] 添加配置文件支持
    - 创建 config.py 或使用 .env 扩展
    - 可配置项: 静音阈值、超时时长、语言等

================================================================================
🟢 低优先级 / 代码风格
================================================================================

[ ] 添加 README.md
    - 项目说明
    - 安装步骤
    - 使用方法
    - 依赖说明

[ ] 添加单元测试
    - 创建 tests/ 目录
    - 测试各模块核心功能

[ ] 提取魔法数字为常量
    - paster.py:17 的 sleep(0.2)
    - notifier.py:13 的 3.0

[ ] 修复通知文字截断逻辑
    - 位置: main.py:103,106
    - 问题: text[:80]... 在短文本时显示不正确
    - 建议: 仅在 len(text) > 80 时添加省略号

[ ] 改进 Shell 脚本
    - 使用 uv run 替代激活虚拟环境

================================================================================
💡 架构建议 (长期)
================================================================================

[ ] 添加 CLI 支持
    - 使用 argparse 或 click
    - 支持 --device, --max-duration, --language 等参数

[ ] 考虑异步优化
    - 使用 asyncio 优化录音和通知
    - 避免阻塞主线程
